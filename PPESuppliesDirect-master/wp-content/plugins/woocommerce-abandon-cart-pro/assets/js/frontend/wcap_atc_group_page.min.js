jQuery(function(c){c(document).ready(function(){var a=localStorage.getItem("wcap_popup_displayed_next_time");null!=a&&(new Date).getTime()>a&&(localStorage.removeItem("wcap_popup_displayed_next_time"),localStorage.removeItem("wcap_popup_displayed"))});var l="",u={wcap_heading_section_text_email:wcap_atc_modal_param.wcap_atc_head,wcap_text_section_text_field:wcap_atc_modal_param.wcap_atc_text,wcap_email_placeholder_section_input_text:wcap_atc_modal_param.wcap_atc_email_place,wcap_button_section_input_text:wcap_atc_modal_param.wcap_atc_button,wcap_button_bg_color:wcap_atc_modal_param.wcap_atc_button_bg_color,wcap_button_text_color:wcap_atc_modal_param.wcap_atc_button_text_color,wcap_popup_text_color:wcap_atc_modal_param.wcap_atc_popup_text_color,wcap_popup_heading_color:wcap_atc_modal_param.wcap_atc_popup_heading_color,wcap_non_mandatory_modal_input_text:wcap_atc_modal_param.wcap_atc_non_mandatory_input_text,wcap_atc_button:{backgroundColor:wcap_atc_modal_param.wcap_atc_button_bg_color,color:wcap_atc_modal_param.wcap_atc_button_text_color},wcap_atc_popup_text:{color:wcap_atc_modal_param.wcap_atc_popup_text_color},wcap_atc_popup_heading:{color:wcap_atc_modal_param.wcap_atc_popup_heading_color}};c(document.body).on("wc_fragments_refreshed",function(a){if(0<=a.target.innerHTML.indexOf("button wc-forward")){var _=localStorage.getItem("wcap_popup_displayed");if(void 0===typeof _||"yes"!=_){localStorage.setItem("wcap_popup_displayed","yes");var t=new Date;t.setHours(t.getHours()+24),localStorage.setItem("wcap_popup_displayed_next_time",t.getTime());var p={wcap_atc_email:localStorage.getItem("wcap_hidden_email_id"),wcap_atc_user_action:localStorage.getItem("wcap_atc_user_action"),action:"wcap_atc_store_guest_email"};c.post(wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_store_guest_email"),p,function(a,_,t){"success"===_&&a&&localStorage.setItem("wcap_abandoned_id",a)})}}});var a=function(){c(document).on("click",".single_add_to_cart_button",this.wcap_on_single_add_to_cart).on("click",".wcap_popup_button",this.wcap_add_to_cart_from_shop).on("click",".wcap_popup_non_mandatory_button",this.wcap_add_product_to_cart).on("click",".wcap_popup_close",_),c(document).keydown(function(a){27==a.keyCode&&_()})};function _(){c(document.body).removeClass("wcap-atc-modal-open wcap-modal-loading"),c(".wcap-modal, .wcap-modal-overlay").remove()}function p(){var a=localStorage.getItem("wcap_popup_displayed");void 0!==typeof a&&"yes"==a||(wcap_get_client_email=c("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",wcap_get_client_email)),$form=c("form.cart"),$form.submit()}a.prototype.wcap_on_single_add_to_cart=function(a){var _=localStorage.getItem("wcap_popup_displayed");if((void 0===typeof _||"yes"!=_)&&""==wcap_atc_modal_param.wcap_populate_email&&"yes"!==localStorage.getItem("wcap_mailchimp_captured")){for(var t=c(".cart").serializeArray(),p=t.length-1,e="false",o=0;o<p;o++){0<t[o].value&&(e="true")}"true"==e&&(a.preventDefault(),l=this.value,c("#wcap-add-to-cart").val(l),function(){c(document.body).addClass("wcap-atc-modal-open").append('<div class="wcap-modal-overlay"></div>'),c(document.body).append('<div class="wcap-modal" style="overflow-y:auto; max-height:90%;"><div class="wcap-modal__contents"> '+wcap_atc_modal_param.wcap_atc_modal_data+" </div> </div>"),function(){c(".wcap-modal__body").removeProp("style");var a=c(".wcap-modal__header").outerHeight(),_=c(".wcap-modal").height(),t=c(".wcap-modal").width(),p=c(".wcap-modal__body").outerHeight()+a;c(".wcap-modal").css({"margin-left":-t/2,"margin-top":-_/2}),_<p-5&&c(".wcap-modal__body").height(_-a)}(),c(document.body).trigger("wcap_after_atc_load");new Vue({el:"#wcap_popup_main_div",data:u});c(".wcap_popup_button").prop("disabled",!0),c("#wcap_popup_input").on("input",function(a){var _=c("#wcap_popup_input").val(),t=c(".wcap_popup_button").is(":disabled");0<_.length&&1==t?c(".wcap_popup_button").prop("disabled",!1):0==_.length&&0==t&&c(".wcap_popup_button").prop("disabled",!0)})}())}""!=wcap_atc_modal_param.wcap_populate_email&&(localStorage.setItem("wcap_hidden_email_id",wcap_atc_modal_param.wcap_populate_email),localStorage.setItem("wcap_atc_user_action","yes"))},a.prototype.wcap_add_to_cart_from_shop=function(a){a.preventDefault();var _=c("#wcap_popup_input").val();new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(_)?(wcap_get_client_email=c("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",wcap_get_client_email),localStorage.setItem("wcap_atc_user_action","yes"),p()):(c("#wcap_placeholder_validated_msg").text(wcap_atc_modal_param.wcap_mandatory_email_text),c("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){c("#wcap_placeholder_validated_msg").fadeOut()},3e3))},a.prototype.wcap_add_product_to_cart=function(a){if("off"==wcap_atc_modal_param.wcap_atc_mandatory_email)a.preventDefault(),localStorage.setItem("wcap_atc_user_action","no"),p();else{a.preventDefault();var _=c("#wcap_popup_input").val(),t=wcap_atc_modal_param.wcap_mandatory_text;_&&(t=wcap_atc_modal_param.wcap_mandatory_email_text),c("#wcap_placeholder_validated_msg").text(t),c("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){c("#wcap_placeholder_validated_msg").fadeOut()},3e3)}},new a});